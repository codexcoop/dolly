<div class="select-area">
  <div class="select-wrap">
    <% through_record = f.object.send(opts[:through_association_name].to_sym).first || opts[:through_record] %>

    <% f.fields_for(opts[:through_association_name], through_record) do |through_record_form| %>
      <%= through_record_form.select  opts[:foreign_key].to_sym,
                                      options_for_select(opts[:options_for_select], through_record.send(opts[:foreign_key])),
                                      options = {},
                                      html_options = { :class => "relation-simple-select" } %>

      <%= through_record_form.hidden_field :_destroy, :class => 'destroy-relation' %>
    <% end %>
  </div>
</div>

